import{_ as e,C as n,c as t,o as l,j as i,G as p,ao as h,a as r}from"./chunks/framework.RuhsIXye.js";const y=JSON.parse('{"title":"创建消息","description":"","frontmatter":{},"headers":[],"relativePath":"guide/功能详情/楼层消息/创建消息.md","filePath":"guide/功能详情/楼层消息/创建消息.md","lastUpdated":null}'),d={name:"guide/功能详情/楼层消息/创建消息.md"};function k(o,s,c,g,E,b){const a=n("CustomTOC");return l(),t("div",null,[s[0]||(s[0]=i("h1",{id:"创建消息",tabindex:"-1"},[r("创建消息 "),i("a",{class:"header-anchor",href:"#创建消息","aria-label":'Permalink to "创建消息"'},"​")],-1)),p(a),s[1]||(s[1]=h(`<h2 id="createchatmessages" tabindex="-1">createChatMessages <a class="header-anchor" href="#createchatmessages" aria-label="Permalink to &quot;createChatMessages&quot;">​</a></h2><p>创建聊天消息。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-2qTjF" id="tab-kwvMTwO" checked><label data-title="createChatMessages" for="tab-kwvMTwO">createChatMessages</label><input type="radio" name="group-2qTjF" id="tab-6L27joi"><label data-title="ChatMessageCreating" for="tab-6L27joi">ChatMessageCreating</label><input type="radio" name="group-2qTjF" id="tab-adTjJX6"><label data-title="CreateChatMessagesOption" for="tab-adTjJX6">CreateChatMessagesOption</label></div><div class="blocks"><div class="language-typescript vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createChatMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  chat_messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ChatMessageCreating</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateChatMessagesOption</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ChatMessageCreating</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  role</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;system&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;assistant&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  is_hidden</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateChatMessagesOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  insert_at</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  refresh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;none&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;affected&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="chat-messages" tabindex="-1"><code>chat_messages</code> <a class="header-anchor" href="#chat-messages" aria-label="Permalink to &quot;\`chat_messages\`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>ChatMessageCreating[]</code></li><li><strong>描述</strong>: 要创建的消息数组，每条消息必须包含 <code>role</code> 和 <code>message</code> 字段</li></ul><p><code>ChatMessageCreating</code> 包含以下字段：</p><p><code>name?</code></p><ul><li><strong>类型</strong>: <code>string</code></li><li><strong>描述</strong>: 消息发送者名称</li></ul><p><code>role</code></p><ul><li><strong>类型</strong>: <code>&#39;system&#39; | &#39;assistant&#39; | &#39;user&#39;</code></li><li><strong>描述</strong>: 消息角色</li></ul><p><code>is_hidden?</code></p><ul><li><strong>类型</strong>: <code>boolean</code></li><li><strong>描述</strong>: 是否隐藏该消息</li></ul><p><code>message</code></p><ul><li><strong>类型</strong>: <code>string</code></li><li><strong>描述</strong>: 消息内容</li></ul><p><code>data?</code></p><ul><li><strong>类型</strong>: <code>Record&lt;string, any&gt;</code></li><li><strong>描述</strong>: 消息绑定的数据</li></ul><h4 id="insert-at" tabindex="-1"><code>insert_at?</code> <a class="header-anchor" href="#insert-at" aria-label="Permalink to &quot;\`insert_at?\`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>number | &#39;end&#39;</code></li><li><strong>描述</strong>: 插入到指定楼层前或末尾；默认为 <code>&#39;end&#39;</code></li></ul><h4 id="refresh" tabindex="-1"><code>refresh?</code> <a class="header-anchor" href="#refresh" aria-label="Permalink to &quot;\`refresh?\`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;none&#39; | &#39;affected&#39; | &#39;all&#39;</code></li><li><strong>描述</strong>: 是否更新楼层在页面上的显示，只会更新已经被加载在网页上的楼层，并触发被更新楼层的 &quot;仅格式显示&quot; 正则; 默认为 <code>&#39;affected&#39;</code><ul><li><code>&#39;none&#39;</code>: 不更新页面的显示</li><li><code>&#39;affected&#39;</code>: 仅更新被影响楼层的显示</li><li><code>&#39;all&#39;</code>: 重新载入整个聊天消息，将会触发 <code>tavern_events.CHAT_CHANGED</code> 事件</li></ul></li></ul><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-iarmE" id="tab-g1_epiO" checked><label data-title="在第 10 楼前插入一条消息" for="tab-g1_epiO">在第 10 楼前插入一条消息</label><input type="radio" name="group-iarmE" id="tab-XDOHq_M"><label data-title="在末尾插入一条消息" for="tab-XDOHq_M">在末尾插入一条消息</label><input type="radio" name="group-iarmE" id="tab-fbaJzGp"><label data-title="在末尾插入系统消息并设置数据" for="tab-fbaJzGp">在末尾插入系统消息并设置数据</label></div><div class="blocks"><div class="language-typescript vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createChatMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([{ role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你好&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }], { insert_at: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createChatMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([{ role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你好&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createChatMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([{ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;system&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;系统通知&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: { 剧情阶段: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;新手村&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div>`,23))])}const F=e(d,[["render",k]]);export{y as __pageData,F as default};
