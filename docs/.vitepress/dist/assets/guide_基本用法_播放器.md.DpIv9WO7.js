import{_ as d,C as e,c as o,o as r,j as s,ao as t,G as l,a,w as h}from"./chunks/framework.RuhsIXye.js";const v=JSON.parse('{"title":"音频播放器功能","description":"","frontmatter":{"order":4},"headers":[],"relativePath":"guide/基本用法/播放器.md","filePath":"guide/基本用法/播放器.md","lastUpdated":1744184508000}'),c={name:"guide/基本用法/播放器.md"};function k(u,i,b,g,m,y){const n=e("VPNolebaseInlineLinkPreview"),p=e("CustomTOC");return r(),o("div",null,[i[3]||(i[3]=s("h1",{id:"音频播放器功能",tabindex:"-1"},[a("音频播放器功能 "),s("a",{class:"header-anchor",href:"#音频播放器功能","aria-label":'Permalink to "音频播放器功能"'},"​")],-1)),s("p",null,[i[1]||(i[1]=a("本功能修改自酒馆官方扩展 ")),l(n,{href:"https://github.com/SillyTavern/Extension-Audio",target:"_blank",rel:"noreferrer"},{default:h(()=>i[0]||(i[0]=[a("Dynamic Audio")])),_:1}),i[2]||(i[2]=a("。"))]),i[4]||(i[4]=t('<p><strong>特性</strong></p><ul><li>直接播放网络音频</li><li>全局接管前端界面中的音频播放，解决多楼层音乐会同时播放的冲突问题，以及同一音频在楼层更新时无法接续播放的问题</li><li>可视化地对音频列表中音频的排序，编辑和删除</li><li>增加导入按钮，可以批量输入链接导入到歌单</li><li>四种播放模式：【列表循环、随机播放、单曲循环、播完停止】</li><li>注册了 Quick Reply 命令,可以使用快速回复听歌。</li></ul><div class="tip custom-block"><p class="custom-block-title">提示</p><p>音频的链接存储在当前聊天的局部变量中，切换聊天就会清空，切换回来时会再加载。可以使用<code>/listvar</code>查看变量列表，变量名分别为<code>bgmurl</code>和<code>ambienturl</code>，支持使用 Quick Reply 对播放列表做更多自定义的改动。</p></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p>音乐和音效两个播放器内在逻辑完全一致，因未知原因，在音频长度极短的情况下会出现播放不全的问题，禁止缓存后才可正常播放，因此音效播放器不会对音频文件进行缓存。推荐主要使用音乐播放器，音效播放器仅用于文件较小的音频文件。</p></div>',4)),l(p),i[5]||(i[5]=t('<h2 id="audioenable" tabindex="-1">audioEnable <a class="header-anchor" href="#audioenable" aria-label="Permalink to &quot;audioEnable&quot;">​</a></h2><p>控制音乐播放器或音效播放器的开启与关闭。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> audioEnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bgm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ambient&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="type" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type" aria-label="Permalink to &quot;`type`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;bgm&#39; | &#39;ambient&#39;</code></li><li><strong>描述</strong>: 音乐或音效</li></ul><h4 id="state" tabindex="-1"><code>state?</code> <a class="header-anchor" href="#state" aria-label="Permalink to &quot;`state?`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>boolean</code></li><li><strong>描述</strong>: 开启或关闭, 不填写默认为 <code>true</code></li></ul><h3 id="quick-reply-命令" tabindex="-1">Quick Reply 命令 <a class="header-anchor" href="#quick-reply-命令" aria-label="Permalink to &quot;Quick Reply 命令&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioenable [type=bgm|ambient] [state=true|false]?</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>: 音乐或音效</li><li><code>state</code> (可选): 开启或关闭, 不填写默认为 <code>true</code></li></ul><div class="info custom-block"><p class="custom-block-title">示例</p><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioenable type=ambient state=false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h2 id="audioimport" tabindex="-1">audioImport <a class="header-anchor" href="#audioimport" aria-label="Permalink to &quot;audioImport&quot;">​</a></h2><p>导入一个或多个音频到播放界面。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> audioImport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bgm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ambient&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="参数-1" tabindex="-1">参数 <a class="header-anchor" href="#参数-1" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="type-1" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type-1" aria-label="Permalink to &quot;`type`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;bgm&#39; | &#39;ambient&#39;</code></li><li><strong>描述</strong>: 音乐或音效</li></ul><h4 id="play" tabindex="-1"><code>play?</code> <a class="header-anchor" href="#play" aria-label="Permalink to &quot;`play?`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>boolean</code></li><li><strong>描述</strong>: 是否立即播放, 不填写默认为 <code>true</code></li></ul><h4 id="url" tabindex="-1"><code>url</code> <a class="header-anchor" href="#url" aria-label="Permalink to &quot;`url`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>string</code></li><li><strong>描述</strong>: 要播放的音频链接，可以批量导入，多个链接之间用<strong>英文</strong>逗号隔开</li></ul><h3 id="quick-reply-命令-1" tabindex="-1">Quick Reply 命令 <a class="header-anchor" href="#quick-reply-命令-1" aria-label="Permalink to &quot;Quick Reply 命令&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioimport [type=bgm|ambient] [play=true|false]? url</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>: 音乐或音效</li><li><code>play</code> (可选): 是否导入之后立即播放第一个音频, 不填写默认为 <code>true</code></li><li><code>url</code>: 要播放的音频链接，可以批量导入，多个链接之间用<strong>英文</strong>逗号隔开</li></ul><div class="info custom-block"><p class="custom-block-title">示例</p><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioimport type=ambient play=false url=https://example.com/sound1.mp3,https://example.com/sound2.mp3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h2 id="audioselect" tabindex="-1">audioSelect <a class="header-anchor" href="#audioselect" aria-label="Permalink to &quot;audioSelect&quot;">​</a></h2><p>选择指定的音频并开始播放。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> audioSelect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bgm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ambient&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="参数-2" tabindex="-1">参数 <a class="header-anchor" href="#参数-2" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="type-2" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type-2" aria-label="Permalink to &quot;`type`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;bgm&#39; | &#39;ambient&#39;</code></li><li><strong>描述</strong>: 音乐或音效</li></ul><h4 id="url-1" tabindex="-1"><code>url</code> <a class="header-anchor" href="#url-1" aria-label="Permalink to &quot;`url`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>string</code></li><li><strong>描述</strong>: 要播放的音频链接，如果在播放列表里不存在则先导入再播放，不可批量导入，只能填写一个链接</li></ul><h3 id="quick-reply-命令-2" tabindex="-1">Quick Reply 命令 <a class="header-anchor" href="#quick-reply-命令-2" aria-label="Permalink to &quot;Quick Reply 命令&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioselect [type=bgm|ambient] url</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>: 音乐或音效</li><li><code>url</code>: 要播放的音频链接，如果在播放列表里不存在则先导入再播放，不可批量导入，只能填写一个链接</li></ul><div class="info custom-block"><p class="custom-block-title">示例</p><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioselect type=bgm https://example.com/song.mp3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h2 id="audioplay" tabindex="-1">audioPlay <a class="header-anchor" href="#audioplay" aria-label="Permalink to &quot;audioPlay&quot;">​</a></h2><p>控制音频的播放和暂停。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> audioPlay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bgm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ambient&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="参数-3" tabindex="-1">参数 <a class="header-anchor" href="#参数-3" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="type-3" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type-3" aria-label="Permalink to &quot;`type`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;bgm&#39; | &#39;ambient&#39;</code></li><li><strong>描述</strong>: 音乐或音效</li></ul><h4 id="play-1" tabindex="-1"><code>play?</code> <a class="header-anchor" href="#play-1" aria-label="Permalink to &quot;`play?`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>boolean</code></li><li><strong>描述</strong>: 播放或暂停, 不填写默认为 <code>true</code></li></ul><h3 id="quick-reply-命令-3" tabindex="-1">Quick Reply 命令 <a class="header-anchor" href="#quick-reply-命令-3" aria-label="Permalink to &quot;Quick Reply 命令&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioplay [type=bgm|ambient] [play=true|false]?</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>: 音乐或音效</li><li><code>play</code> (可选): 播放或暂停, 不填写默认为 <code>true</code></li></ul><div class="info custom-block"><p class="custom-block-title">示例</p><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audioplay type=ambient play=false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h2 id="audiomode" tabindex="-1">audioMode <a class="header-anchor" href="#audiomode" aria-label="Permalink to &quot;audioMode&quot;">​</a></h2><p>切换音频的播放模式。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> audioMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bgm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ambient&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;repeat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;random&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;single&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;stop&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="参数-4" tabindex="-1">参数 <a class="header-anchor" href="#参数-4" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="type-4" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type-4" aria-label="Permalink to &quot;`type`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;bgm&#39; | &#39;ambient&#39;</code></li><li><strong>描述</strong>: 音乐或音效</li></ul><h4 id="mode" tabindex="-1"><code>mode</code> <a class="header-anchor" href="#mode" aria-label="Permalink to &quot;`mode`&quot;">​</a></h4><ul><li><strong>类型</strong>: <code>&#39;repeat&#39; | &#39;random&#39; | &#39;single&#39; | &#39;stop&#39;</code></li><li><strong>描述</strong>: 播放模式, 分别是列表循环、随机播放、单曲循环、播完停止</li></ul><h3 id="quick-reply-命令-4" tabindex="-1">Quick Reply 命令 <a class="header-anchor" href="#quick-reply-命令-4" aria-label="Permalink to &quot;Quick Reply 命令&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audiomode [type=bgm|ambient] [mode=repeat|random|single|stop]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>: 音乐或音效</li><li><code>mode</code>: 播放模式, 分别是列表循环、随机播放、单曲循环、播完停止</li></ul><div class="info custom-block"><p class="custom-block-title">示例</p><div class="language-plaintext vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/audiomode type=ambient mode=random</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div>',62))])}const F=d(c,[["render",k]]);export{v as __pageData,F as default};
