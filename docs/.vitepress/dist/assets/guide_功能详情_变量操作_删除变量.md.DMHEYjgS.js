import{_ as e,C as l,c as t,o as n,j as i,G as h,ao as p,a as r}from"./chunks/framework.RuhsIXye.js";const y=JSON.parse('{"title":"删除变量","description":"","frontmatter":{},"headers":[],"relativePath":"guide/功能详情/变量操作/删除变量.md","filePath":"guide/功能详情/变量操作/删除变量.md","lastUpdated":1746703947000}'),d={name:"guide/功能详情/变量操作/删除变量.md"};function k(o,s,c,g,E,u){const a=l("CustomTOC");return n(),t("div",null,[s[0]||(s[0]=i("h1",{id:"删除变量",tabindex:"-1"},[r("删除变量 "),i("a",{class:"header-anchor",href:"#删除变量","aria-label":'Permalink to "删除变量"'},"​")],-1)),h(a),s[1]||(s[1]=p('<h2 id="deletevariable" tabindex="-1">deleteVariable <a class="header-anchor" href="#deletevariable" aria-label="Permalink to &quot;deleteVariable&quot;">​</a></h2><p>删除变量, 如果变量不存在则什么也不做。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">variable_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VariableOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateVariablesWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">old_variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(old_variables, variable_path); </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> old_variables; }, { type, message_id });</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><h4 id="variable-path" tabindex="-1"><code>variable_path</code> <a class="header-anchor" href="#variable-path" aria-label="Permalink to &quot;`variable_path`&quot;">​</a></h4><p>要删除的变量路径：</p><ul><li>如果变量不存在，则什么也不做</li><li>如果变量已经存在，则删除该变量</li></ul><h4 id="option" tabindex="-1"><code>option?</code> <a class="header-anchor" href="#option" aria-label="Permalink to &quot;`option?`&quot;">​</a></h4><p>一个可选的配置对象，包含以下属性：</p><ul><li><strong><code>type?</code></strong>: <code>string</code><ul><li>指定操作的变量类型，默认为 <code>&#39;chat&#39;</code>。</li><li>可选值: <ul><li><code>&#39;message&#39;</code>: 针对特定消息楼层的变量。</li><li><code>&#39;chat&#39;</code>: 整个聊天会话的变量（默认）。</li><li><code>&#39;character&#39;</code>: 当前角色卡的变量。</li><li><code>&#39;global&#39;</code>: 全局变量。</li></ul></li></ul></li><li><strong><code>message_id?</code></strong>: <code>number | &#39;latest&#39;</code><ul><li>当 <code>type</code> 为 <code>&#39;message&#39;</code> 时，此参数指定目标消息的楼层号。</li><li>如果是数字，表示具体的楼层 ID。</li><li>如果是负数，表示相对于最新消息的深度索引 (例如, <code>-1</code> 表示最新的消息, <code>-2</code> 表示倒数第二条)。</li><li><code>&#39;latest&#39;</code> (默认值): 表示最新的消息楼层。</li><li>此参数仅在 <code>type</code> 为 <code>&#39;message&#39;</code> 时有效。</li></ul></li></ul><h3 id="返回值" tabindex="-1">返回值 <a class="header-anchor" href="#返回值" aria-label="Permalink to &quot;返回值&quot;">​</a></h3><ul><li><strong>布尔值</strong>: <code>Promise&lt;boolean&gt;</code></li></ul><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 执行前变量: `{爱城华恋: {好感度: 5}}`</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;爱城华恋.好感度&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 执行后变量: `{爱城华恋: {}}`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',14))])}const m=e(d,[["render",k]]);export{y as __pageData,m as default};
