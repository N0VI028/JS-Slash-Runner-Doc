import{_ as r,C as t,c,o,j as n,an as p,a,G as l,w as i}from"./chunks/framework.bLg64c39.js";const v=JSON.parse('{"title":"参与贡献","description":"","frontmatter":{"order":4},"headers":[],"relativePath":"关于前端助手/参与贡献.md","filePath":"关于前端助手/参与贡献.md","lastUpdated":1740017752000}'),d={name:"关于前端助手/参与贡献.md"};function m(b,s,u,_,f,g){const e=t("VPNolebaseInlineLinkPreview");return o(),c("div",null,[s[7]||(s[7]=n("h1",{id:"参与贡献",tabindex:"-1"},[a("参与贡献 "),n("a",{class:"header-anchor",href:"#参与贡献","aria-label":'Permalink to "参与贡献"'},"​")],-1)),s[8]||(s[8]=n("h2",{id:"环境配置",tabindex:"-1"},[a("环境配置 "),n("a",{class:"header-anchor",href:"#环境配置","aria-label":'Permalink to "环境配置"'},"​")],-1)),n("p",null,[s[1]||(s[1]=a("你可以参考 ")),l(e,{href:"https://sillytavern-stage-girls-dog.readthedocs.io/tool_and_experience/js_slash_runner/index.html",target:"_blank",rel:"noreferrer"},{default:i(()=>s[0]||(s[0]=[a("参与前端插件开发的 VSCode 环境配置")])),_:1}),s[2]||(s[2]=a(" 来得到 VSCode 上更详细的配置和使用教程。"))]),n("ul",null,[n("li",null,[s[4]||(s[4]=n("strong",null,"VSCode",-1)),s[5]||(s[5]=a(": 安装并导入 ")),l(e,{href:"https://gitgud.io/SmilingFace/tavern_resource/-/raw/main/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/sillytavern.code-profile?inline=false",target:"_blank",rel:"noreferrer"},{default:i(()=>s[3]||(s[3]=[a("VSCode 配置文件")])),_:1})]),s[6]||(s[6]=p("<li><strong>Git</strong>: 安装并将本项目克隆到酒馆的 <code>SillyTavern/public/scripts/extensions/third-party</code> 文件夹下，在酒馆根目录进行 <code>npm install --dev --no-audit --no-fund --no-progress</code> 以得到酒馆的语法高亮。</li><li><strong>typescript</strong>: <code>npm install -g typescript</code></li><li><strong>python</strong>: <code>pip install -r requirements.txt</code></li>",3))]),s[9]||(s[9]=p(`<h2 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-label="Permalink to &quot;项目结构&quot;">​</a></h2><p>项目采用 typescript 编写，相较于 javascript 有更丰富的静态检查；当然你也可以在开头加上一句 <code>// @ts-nocheck</code> 然后当作 javascript 写。</p><p>所有代码均位于 <code>src</code> 中，你只应该对 <code>src/iframe_client_exported</code> 以外的代码进行修改，然后运行 <code>python compile.py</code> 完成修改。</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>在 <code>import</code> 其他脚本时，记得使用 <code>.js</code> 后缀，如 <code>import { iframe_client } from &quot;./iframe_client_exported/index.js&quot;；</code></p></div><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── .vscode  # VSCode 调试任务设置</span></span>
<span class="line"><span>├── src</span></span>
<span class="line"><span></span></span>
<span class="line"><span>│   ├── iframe_client  # iframe 内可用的代码，角色卡编写者能使用的 triggerSlash 等都位于此</span></span>
<span class="line"><span>│   │   │              #   由于它实际是 iframe 中的代码，如果要与其他部分代码交互，则要通过 window.parent.postMessage 发送消息</span></span>
<span class="line"><span>│   │   │              #</span></span>
<span class="line"><span>│   │   │              # 那么如何将这里的代码注入到 iframe 的 content 中呢?</span></span>
<span class="line"><span>│   │   │              #   运行 \`python compile.py\` 后,</span></span>
<span class="line"><span>│   │   │              #   这里所有代码会被保存为 iframe_client_exported/index.ts 中的 iframe_client 字符串,</span></span>
<span class="line"><span>│   │   │              #   因此直接用 \`&lt;script&gt;\${iframe_client}&lt;/script&gt;\` 即可</span></span>
<span class="line"><span>│   │   ├── event.ts</span></span>
<span class="line"><span>│   │   └── ...</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── iframe_server  # 服务器端对 iframe 发送的 postMessage 进行处理，从而完成对应功能</span></span>
<span class="line"><span>│   │   ├── event.ts</span></span>
<span class="line"><span>│   │   └── ...</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── iframe_client_exported  # 由编译脚本自动生成</span></span>
<span class="line"><span>│   │   ├── index.ts            # 我们要将代码注入到 iframe 中则直接使用这个文件中的 iframe_client 字符串即可</span></span>
<span class="line"><span>│   │   └── ...</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── slash_command  # 自定义的酒馆 Slash Command</span></span>
<span class="line"><span>│   │   ├── event.ts</span></span>
<span class="line"><span>│   │   └── ...</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── util  # 杂七杂八</span></span>
<span class="line"><span>│   │</span></span>
<span class="line"><span>│   ├── index.ts           # 主文件</span></span>
<span class="line"><span>│   ├── message_iframe.ts  # 楼层消息 iframe</span></span>
<span class="line"><span>│   └── script_iframe.ts   # 全局脚本 iframe</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── dist  # typescript 编译得到的 javascript 代码，实际被酒馆使用，但无需我们在意</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── compile.py     # 编译脚本</span></span>
<span class="line"><span>├── manifest.json  # 酒馆插件整体设置</span></span>
<span class="line"><span>└── tsconfig.json  # typescript 项目设置</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="一次完整的提交" tabindex="-1">一次完整的提交 <a class="header-anchor" href="#一次完整的提交" aria-label="Permalink to &quot;一次完整的提交&quot;">​</a></h2><ol><li>对除了 <code>src/iframe_client_exported</code> 以外的代码进行修改。</li><li><code>python compile.py</code> 编译文件。</li><li>在酒馆网页或通过 VSCode 等调试添加的功能，并修正、重新编译。</li><li>上传提交。</li></ol>`,7))])}const x=r(d,[["render",m]]);export{v as __pageData,x as default};
