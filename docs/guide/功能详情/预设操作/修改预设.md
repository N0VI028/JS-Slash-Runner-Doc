---
order: 3
---

# 修改预设

:::tip
请务必先阅读[如何正确使用酒馆助手](/guide/基本用法/如何正确使用酒馆助手.md)
:::

[点击查看对应类型定义文件（可发给AI或IDE使用，酒馆助手设置中提供了打包下载）](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/function/preset.d.ts)

<CustomTOC />

## loadPreset

加载 `preset_name` 预设作为酒馆正在使用的预设 (`'in_use'`)。

```typescript
function loadPreset(preset_name: Exclude<string, 'in_use'>): boolean;
```

### 参数

#### preset_name

- **类型**: `string`
- **描述**: 预设名称

### 返回值

- **是否成功切换, 可能因预设不存在等原因而失败**: `boolean`

## renamePreset

重命名 `preset_name` 预设为 `new_name`。

```typescript
function renamePreset(preset_name: Exclude<string, 'in_use'>, new_name: string): Promise<boolean>;
```

### 参数

#### preset_name

- **类型**: `string`
- **描述**: 预设名称

#### new_name

- **类型**: `string`
- **描述**: 新名称

### 返回值

- **是否成功重命名, 可能因预设不存在等原因而失败**: `boolean`

## replacePreset

完全替换 `preset_name` 预设的内容为 `preset`。

```typescript
function replacePreset(preset_name: LiteralUnion<'in_use', string>, preset: Preset): Promise<void>;
```

### 参数

#### preset_name

- **类型**: `string`
- **描述**: 预设名称

#### preset

- **类型**: [`Preset`](./创建预设.md#createpreset)
- **描述**: 预设内容

### 示例

:::code-group

```typescript [为酒馆正在使用的预设开启流式传输]
const preset = getPreset('in_use');
preset.settings.should_stream = true;
await replacePreset('in_use', preset);
```

```typescript [将 '预设A' 的条目按顺序复制到 '预设B' 开头]
const preset_a = getPreset('预设A');
const preset_b = getPreset('预设B');
preset_b.prompts = [...preset_a.prompts, ...preset_b.prompts];
await replacePreset('预设B', preset_b);
```

:::

## updatePresetWith

用 `updater` 函数更新 `preset_name` 预设。

::: code-group

```typescript [updatePresetWith]
function updatePresetWith(preset_name: LiteralUnion<'in_use', string>, updater: PresetUpdater): Promise<Preset>;
```

```typescript [PresetUpdater]
type PresetUpdater = ((preset: Preset) => Preset) | ((preset: Preset) => Promise<Preset>);
```

:::

### 参数

#### preset_name

- **类型**: `string`
- **描述**: 预设名称

#### updater

- **类型**: [`PresetUpdater`](./修改预设.md#updatepresetwith)
- **描述**: 用于更新预设的函数. 它应该接收预设内容作为参数, 并返回更新后的预设内容.

### 返回值

- **更新后的预设内容**: [`Preset`](./创建预设.md#createpreset)

### 示例

:::code-group

```typescript [为酒馆正在使用的预设开启流式传输]
const preset = await updatePresetWith('in_use', preset => {
  preset.settings.should_stream = true;
  return preset;
});
```

```typescript [将 '预设A' 的条目按顺序复制到 '预设B' 开头]
const preset_a = getPreset('预设A');
const preset_b = getPreset('预设B');
const preset = await updatePresetWith('预设B', preset => {
  preset.prompts = [...preset_a.prompts, ...preset.prompts];
  return preset;
});
```

:::

## setPreset

将预设内容修改回预设中, 如果某个内容不存在, 则该内容将会采用原来的值。

```typescript
function setPreset(preset_name: LiteralUnion<'in_use', string>, preset: PartialDeep<Preset>): Promise<Preset>;
```

### 参数

#### preset_name

- **类型**: `string`
- **描述**: 预设名称

#### preset

- **类型**: [`PartialDeep<Preset>`](./创建预设.md#createpreset)
- **描述**: 预设内容

### 返回值

- **更新后的预设内容**: [`Preset`](./创建预设.md#createpreset)

### 示例

:::code-group

```typescript [为酒馆正在使用的预设开启流式传输]
await setPreset('in_use', { settings: { should_stream: true } });   
```

```typescript [将 '预设A' 的条目按顺序复制到 '预设B' 开头]
const preset_a = getPreset('预设A');
const preset_b = getPreset('预设B');
await setPreset('预设B', {
  prompts: [...preset_a.prompts, ...preset_b.prompts],
});
```

:::
