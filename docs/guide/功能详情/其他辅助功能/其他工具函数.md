---
order: 99
---

# å…¶ä»–å·¥å…·å‡½æ•°

<CustomTOC />

## substitudeMacros

æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„ SillyTavern å®ã€‚

```typescript
async function substitudeMacros(text: string): Promise<string>;
```

### å‚æ•°

#### `text`

- **ç±»å‹**: `string`
- **æè¿°**: éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²

### è¿”å›å€¼

- **æ›¿æ¢ç»“æœ**: `string`

### ç¤ºä¾‹

```typescript
const text = substitudeMacros("{{char}} speaks in {{lastMessageId}}");
text == "å°‘å¥³æ­Œå‰§ speaks in 5";
```

## registerMacroLike

æ³¨å†Œä¸€ä¸ªæ–°çš„åŠ©æ‰‹å®ã€‚

```typescript
function registerMacroLike(
  regex: RegExp,
  replace: (context: Context, substring: string, ...args: any[]) => string,
): void;
```

### å‚æ•°

#### `regex`

- **ç±»å‹**: `RegExp`
- **æè¿°**: åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼

#### `replace`

- **ç±»å‹**: `(context: Context, substring: string, ...args: any[]) => string`
- **æè¿°**: é’ˆå¯¹åŒ¹é…åˆ°çš„æ–‡æœ¬æ‰€è¦è¿›è¡Œçš„æ›¿æ¢

### ç¤ºä¾‹

```typescript
registerMacroLike(
  /<checkbox>(.*?)<checkbox>/gi,
  (context: Context, substring: string, content: string) => { return content; });
```


## getIframeName <Badge type="warning" text="ğŸš«TavernHelper" />

è·å– iframe çš„åç§°ã€‚

```typescript
function getIframeName(): string;
```

### è¿”å›å€¼

- **iframe åç§°**: `string`
  - å¯¹äºæ¥¼å±‚æ¶ˆæ¯æ˜¯ `message-iframe-æ¥¼å±‚id-æ˜¯è¯¥æ¥¼å±‚ç¬¬å‡ ä¸ªiframe`
  - å¯¹äºå…¨å±€è„šæœ¬æ˜¯ `script-iframe-è„šæœ¬åç§°`

## getMessageId <Badge type="warning" text="ğŸš«TavernHelper" />

ä»æ¶ˆæ¯æ¥¼å±‚ iframe çš„ `iframe_name` è·å–å®ƒæ‰€åœ¨æ¥¼å±‚çš„æ¥¼å±‚ idã€‚

**åªèƒ½å¯¹æ¥¼å±‚æ¶ˆæ¯ iframe** ä½¿ç”¨

```typescript
function getMessageId(iframe_name: string): number;
```

### å‚æ•°

#### `iframe_name`

- **ç±»å‹**: `string`
- **æè¿°**: æ¶ˆæ¯æ¥¼å±‚ iframe çš„åç§°

### è¿”å›å€¼

- **æ¥¼å±‚ id**: `number`

## getCurrentMessageId <Badge type="warning" text="ğŸš«TavernHelper" />

è·å–æœ¬æ¶ˆæ¯æ¥¼å±‚ iframe æ‰€åœ¨æ¥¼å±‚çš„æ¥¼å±‚ idã€‚

**åªèƒ½å¯¹æ¥¼å±‚æ¶ˆæ¯ iframe** ä½¿ç”¨

```typescript
function getCurrentMessageId(): number;
```

### è¿”å›å€¼

- **æ¥¼å±‚ id**: `number`

## getLastMessageId

è·å–æœ€æ–°æ¥¼å±‚ idã€‚

```typescript
async function getLastMessageId(): Promise<number>;
```

### è¿”å›å€¼

- **æœ€æ–°æ¥¼å±‚ id**: `number`

## getScriptId <Badge type="warning" text="ğŸš«TavernHelper" />

è·å–è„šæœ¬åº“çš„è„šæœ¬ idã€‚

```typescript
function getScriptId(): string;
```

### è¿”å›å€¼

- **è„šæœ¬ id**: `string`

## toastr

å¯¼å‡ºäº† `toastr` åº“, ä½ ç°åœ¨å¯ä»¥ç”¨ `toastr.error('å†…å®¹', 'æ ‡é¢˜')` è€Œä¸æ˜¯ `triggerSlash('/echo severity=error title=æ ‡é¢˜ å†…å®¹')` æ¥è¿›è¡Œé…’é¦†æç¤ºäº†

- `toastr.info`
- `toastr.success`
- `toastr.warning`
- `toastr.error`


