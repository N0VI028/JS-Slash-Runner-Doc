# è®¿é—®æ¥å£

:::tip
è¯·åŠ¡å¿…å…ˆé˜…è¯»[å¦‚ä½•æ­£ç¡®ä½¿ç”¨é…’é¦†åŠ©æ‰‹](/guide/åŸºæœ¬ç”¨æ³•/å¦‚ä½•æ­£ç¡®ä½¿ç”¨é…’é¦†åŠ©æ‰‹.md)
:::

<CustomTOC />

## SillyTavern

é€šè¿‡ `SillyTavern`ï¼Œä½ å¯ä»¥è®¿é—®é…’é¦†æä¾›ç»™æ‰©å±•çš„ç¨³å®šæ¥å£ã€‚é…’é¦†åŠ©æ‰‹ä¸ºå®ƒä»¬é¢å¤–æä¾›äº†[ç±»å‹å®šä¹‰](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/exported.sillytavern.d.ts)ã€‚

è€Œé…’é¦†åŠ©æ‰‹åœ¨é…’é¦†æ¥å£ä¹‹å¤–ï¼Œæä¾›äº†æ›´å¤šæ›´ç›´æ¥çš„åŠŸèƒ½ã€‚

:::code-group

```typescript [SillyTavern]
/**
 * é…’é¦†æä¾›ç»™æ’ä»¶çš„ç¨³å®šæ¥å£, å…·ä½“å†…å®¹è§äº https://github.com/SillyTavern/SillyTavern/blob/release/public/scripts/st-context.js#L76
 * ä½ ä¹Ÿå¯ä»¥åœ¨é…’é¦†é¡µé¢æŒ‰ f12, åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ `window.SillyTavern.getContext()` æ¥æŸ¥çœ‹å½“å‰é…’é¦†æ‰€æä¾›çš„æ¥å£
 */
const SillyTavern;
```

:::

### ç¤ºä¾‹

```typescript
// è·å–ç¬¬ 0 æ¡æ¶ˆæ¯çš„æ•°æ®
alert(JSON.stringify(SillyTavern.chat[0]));
```

## TavernHelper

é€šè¿‡ `TavernHelper`ï¼Œå…¶ä»–æ‰©å±•ä¹Ÿå¯ä»¥è®¿é—®é…’é¦†åŠ©æ‰‹æä¾›çš„ç¨³å®šæ¥å£ï¼Œå¯ç”¨æ¥å£ä¸ºåŠŸèƒ½è¯¦æƒ…ä¸­çš„å…¨éƒ¨å†…å®¹ã€‚

### ç¤ºä¾‹

```typescript
// è·å–å½“å‰è§’è‰²å¡çš„å¤´åƒè·¯å¾„
alert(TavernHelper.getCharAvatarPath());
```

::: warning
åœ¨åŠŸèƒ½è¯¦æƒ…æ–‡æ¡£ä¸­ï¼Œæœªå¯¼å‡ºåˆ° window å¯¹è±¡çš„å‡½æ•°ä¼šä½¿ç”¨ `ğŸš«TavernHelper` æ ‡è®°ã€‚è¿™äº›å‡½æ•°åœ¨æ‰©å±•ä¸­æ— æ³•ç›´æ¥é€šè¿‡ `TavernHelper` è°ƒç”¨ã€‚
:::

## æç¤ºè¯æ¨¡æ¿

é€šè¿‡ `EjsTemplate`ï¼Œä½ å¯ä»¥è®¿é—®[æç¤ºè¯æ¨¡æ¿](https://github.com/zonde306/ST-Prompt-Template)æä¾›çš„æ¥å£ã€‚é…’é¦†åŠ©æ‰‹ä¸ºå®ƒä»¬é¢å¤–æä¾›äº†[ç±»å‹å®šä¹‰](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/exported.ejstemplate.d.ts)ã€‚

```typescript
/**
 * æç¤ºè¯æ¨¡æ¿è¯­æ³•æ’ä»¶æ‰€æä¾›çš„é¢å¤–åŠŸèƒ½, å¿…é¡»é¢å¤–å®‰è£…æç¤ºè¯æ¨¡æ¿è¯­æ³•æ’ä»¶, å…·ä½“å†…å®¹è§äº https://github.com/zonde306/ST-Prompt-Template
 * ä½ ä¹Ÿå¯ä»¥åœ¨é…’é¦†é¡µé¢æŒ‰ f12, åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ `window.EjsTemplate` æ¥æŸ¥çœ‹å½“å‰æç¤ºè¯æ¨¡æ¿è¯­æ³•æ‰€æä¾›çš„æ¥å£
 */
const EjsTemplate;
```

## MVU å˜é‡æ¡†æ¶

é€šè¿‡ `Mvu`ï¼Œä½ å¯ä»¥è®¿é—®[MVU å˜é‡æ¡†æ¶](https://github.com/MagicalAstrogy/MagVarUpdate)æä¾›çš„æ¥å£ã€‚é…’é¦†åŠ©æ‰‹ä¸ºå®ƒä»¬é¢å¤–æä¾›äº†[ç±»å‹å®šä¹‰](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/exported.mvu.d.ts)ã€‚

```typescript
/**
 * mvu å˜é‡æ¡†æ¶è„šæœ¬æä¾›çš„é¢å¤–åŠŸèƒ½, å¿…é¡»é¢å¤–å®‰è£… mvu å˜é‡æ¡†æ¶è„šæœ¬, å…·ä½“å†…å®¹è§äº https://github.com/MagicalAstrogy/MagVarUpdate/blob/master/src/export_globals.ts
 * **è¦ä½¿ç”¨å®ƒ, ä½ å¿…é¡»ä¿è¯ä½ çš„è„šæœ¬/ç•Œé¢åŠ è½½åœ¨ mvu è„šæœ¬ä¹‹å
 * ä½ ä¹Ÿå¯ä»¥åœ¨é…’é¦†é¡µé¢æŒ‰ f12, åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ `window.Mvu` æ¥æŸ¥çœ‹å½“å‰ Mvu å˜é‡æ¡†æ¶æ‰€æä¾›çš„æ¥å£
 */
declare const Mvu;
```

### ç¤ºä¾‹

```typescript
const old_data = Mvu.getMvuData({ type: 'message', message_id: 'latest' });
const new_data = await Mvu.parseMessage("_.set('è§’è‰².ç»œç»œ.å¥½æ„Ÿåº¦', 30); // å¼ºåˆ¶ä¿®æ”¹", old_data);
await Mvu.replaceMvuData(new_data, { type: 'message', message_id: 'latest' });
```
