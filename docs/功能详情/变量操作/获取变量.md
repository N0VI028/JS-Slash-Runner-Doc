# 获取变量

<CustomTOC />

## getVariables

获取变量表。

```typescript
async function getVariables(option: VariableOption = {}): Promise<Record<string, any>>
```
### 参数

#### `type?`
- `'chat'`: 聊天变量表（默认值）
- `'global'`: 全局变量表

### 返回值
- **包含变量键值对的对象**: `Promise<Record<string, any>>`

### 示例
:::code-group
```typescript [获取所有聊天变量并弹窗输出结果]
const variables = await getVariables();
alert(variables);
```
```typescript [获取所有全局变量]
const variables = await getVariables({type: 'global'});
// 前端助手内置了 lodash 库，你能用它做很多事，比如查询某个变量是否存在
if (_.has(variables, "神乐光.好感度")) {
  /* ... */
}
```
:::

## 在提示词中获取变量
你可以通过以下格式在提示词中获取变量：

### 变量示例

```typescript
const 全局变量 = {
  神乐光: {
    好感度: 50,
  },
};

const 聊天变量 = {
  商品: [{ 内容: '...' }, { 内容: '...' }],
};

const 消息楼层变量 = {
  当前剧情阶段: '...',
};
```

你可以通过以下格式在提示词中获取他们:

- 全局变量: <code v-pre>{{get_global_variable::神乐光.好感度}}</code>
- 聊天变量: <code v-pre>{{get_chat_variable::商品.1.内容}}</code>
- 消息楼层变量 (通过 `setChatMessage` 设置), 将会获取到最新绑定的消息楼层变量: <code v-pre>{{get_message_variable::当前剧情阶段}}</code>