# 脚本额外功能

:::tip
请务必先阅读[如何正确使用酒馆助手](/guide/基本用法/如何正确使用酒馆助手.md)
:::

你可以在[脚本](/guide/基本用法/脚本库)的代码里为当前脚本添加按钮、设置注释.

[点击查看对应类型定义文件 (可发给 AI 或 IDE 使用, 酒馆助手界面中提供了打包下载)](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/script.d.ts)

<CustomTOC />

## getAllEnabledScriptButtons

获取所有处于启用状态的酒馆助手脚本按钮, 主要是方便 QR 助手等兼容脚本按钮.

:::code-group

```ts [getAllEnabledScriptButtons]
function getAllEnabledScriptButtons(): { [script_id: string]: { button_id: string; button_name: string }[] };
```

:::

## getButtonEvent <Badge type="warning" text="🚫TavernHelper" />

获取按钮对应的事件类型, **只能在脚本中使用**.

:::code-group

```ts [getButtonEvent]
function getButtonEvent(button_name: string): string;
```

:::

### 参数

#### `button_name`

- **类型**: `string`
- **描述**: 按钮名

### 返回值

- **事件类型**: `string`

### 示例

```ts
const event_type = getButtonEvent('按钮名');
eventOn(event_type, () => {
  console.log('按钮被点击了');
});
```

## getScriptButtons <Badge type="warning" text="🚫TavernHelper" />

获取脚本的按钮列表, **只能在脚本中使用**.

:::code-group

```ts [getScriptButtons]
function getScriptButtons(): ScriptButton[];
```

```ts [ScriptButton]
type ScriptButton = {
  name: string;    // 按钮名称
  visible: boolean; // 按钮是否可见
}
```

:::

### 参数

### 返回值

- **类型**: `ScriptButton[]`
- **描述**: 脚本当前的所有按钮数组

### 示例

```ts [获取当前脚本的按钮设置]
const buttons = getScriptButtons();
console.log('当前按钮:', buttons);
```

## replaceScriptButtons <Badge type="warning" text="🚫TavernHelper" />

完全替换脚本的按钮列表, **只能在脚本中使用**.

:::code-group

```ts [replaceScriptButtons]
function replaceScriptButtons(buttons: ScriptButton[]): void;
```

:::

### 参数

#### `buttons`

- **类型**: `ScriptButton[]`
- **描述**: 新的按钮数组, 将完全替换现有按钮
- **必需**: 是

### 示例

```ts [设置脚本按钮为一个"开始游戏"按钮]
replaceScriptButtons([{name: '开始游戏', visible: true}]);
```

```ts [点击"前往地点"按钮后, 切换为地点选项按钮]
eventOnButton("前往地点", () => {
  replaceScriptButtons([{name: '学校', visible: true}, {name: '商店', visible: true}]);
});
```

## appendInexistentScriptButtons <Badge type="warning" text="🚫TavernHelper" />

为脚本按钮列表末尾添加不存在的按钮, 不会重复添加同名按钮, **只能在脚本中使用**.

:::code-group

```ts [appendInexistentScriptButtons]
function appendInexistentScriptButtons(buttons: ScriptButton[]): void;
```

:::

### 参数

#### `buttons`

- **类型**: `ScriptButton[]`
- **描述**: 要添加的按钮数组, 只会添加当前不存在的按钮

### 示例

```ts [新增 "重新开始" 按钮]
appendInexistentScriptButtons([{name: '重新开始', visible: true}]);
```

## getScriptInfo <Badge type="warning" text="🚫TavernHelper" />

获取脚本作者注释

```ts
function getScriptInfo(): string;
```

### 返回值

- **类型**: `string`
- **描述**: 脚本作者注释

### 示例

```ts [获取脚本作者注释]
const info = getScriptInfo();
console.log('脚本作者注释:', info);
```

## replaceScriptInfo <Badge type="warning" text="🚫TavernHelper" />

替换脚本作者注释

```ts
function replaceScriptInfo(info: string): void;
```

### 参数

#### `info`

- **类型**: `string`
- **描述**: 新的作者注释

### 示例

```ts [替换脚本作者注释]
replaceScriptInfo('新的作者注释');
```
