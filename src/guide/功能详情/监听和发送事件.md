---
order: 1
---

# ç›‘å¬å’Œå‘é€äº‹ä»¶

:::tip
è¯·åŠ¡å¿…å…ˆé˜…è¯»[å¦‚ä½•æ­£ç¡®ä½¿ç”¨é…’é¦†åŠ©æ‰‹](/guide/åŸºæœ¬ç”¨æ³•/å¦‚ä½•æ­£ç¡®ä½¿ç”¨é…’é¦†åŠ©æ‰‹.md)
:::

æ‰©å±•å…è®¸ä½ è®¾ç½®å½“å‘ç”ŸæŸç§äº‹ä»¶æ—¶è¿è¡Œæƒ³è¦çš„å‡½æ•°. ä¾‹å¦‚, ä½ ä¹Ÿè®¸æƒ³åœ¨ç©å®¶æ“…è‡ªæ›´æ”¹ä½ çš„ä¸–ç•Œä¹¦æ—¶è­¦å‘Šç©å®¶.

[ç‚¹å‡»æŸ¥çœ‹å¯¹åº”ç±»å‹å®šä¹‰æ–‡ä»¶ (å¯å‘ç»™ AI æˆ– IDE ä½¿ç”¨, é…’é¦†åŠ©æ‰‹ç•Œé¢ä¸­æä¾›äº†æ‰“åŒ…ä¸‹è½½)](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/event.d.ts)

<CustomTOC />

## äº‹ä»¶åˆ—è¡¨

äº‹ä»¶ `EventType` å¯ä»¥æ˜¯:

- `iframe_events` ä¸­çš„ iframe äº‹ä»¶
- `tavern_events` ä¸­è¿‘ç™¾ç§é…’é¦†äº‹ä»¶: æ–°å¼€èŠå¤©ã€æ¥æ”¶åˆ°æ¶ˆæ¯ã€æ¶ˆæ¯è¢«ä¿®æ”¹ã€æç¤ºè¯è¢«å‘é€ç»™ AIã€ä¸–ç•Œä¹¦è¢«ä¿®æ”¹â€¦â€¦
- è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²äº‹ä»¶

å…·ä½“è¯·å‚è€ƒ[äº‹ä»¶åˆ—è¡¨](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/event.d.ts#L235)

## eventOn <Badge type="warning" text="ğŸš«TavernHelper" />

ç›‘å¬äº‹ä»¶, å½“äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è¿è¡Œå‡½æ•°.

å¦‚æœ `listener` å·²ç»åœ¨ç›‘å¬ `event_type`, åˆ™è°ƒç”¨æœ¬å‡½æ•°ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ.

å½“ `eventOn` æ‰€åœ¨çš„å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶, ç›‘å¬å°†ä¼šè‡ªåŠ¨å¸è½½.

```ts
function eventOn<T extends EventType>(event_type: T, listener: ListenerType[T]): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦ç›‘å¬çš„äº‹ä»¶

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦æ³¨å†Œçš„å‡½æ•°

### ç¤ºä¾‹

:::code-group

```ts [ç›‘å¬æ¶ˆæ¯æ¥æ”¶]
// ç›‘å¬æ¶ˆæ¯æ¥æ”¶å¹¶å¼¹å‡º `'hello'`
eventOn(tavern_events.MESSAGE_RECEIVED, () => alert('hello'));
```

```ts [ç›‘å¬æ¶ˆæ¯è¢«ä¿®æ”¹]
// é…’é¦†äº‹ä»¶ tavern_events.MESSAGE_UPDATED ä¼šä¼ é€’è¢«æ›´æ–°çš„æ¥¼å±‚ id
eventOn(tavern_events.MESSAGE_UPDATED, message_id => {
  alert(`ä½ åˆšåˆšæ›´æ–°äº†ç¬¬ ${message_id} æ¡èŠå¤©æ¶ˆæ¯å¯¹å§ğŸ˜¡`);
});
```

:::

## eventMakeLast <Badge type="warning" text="ğŸš«TavernHelper" />

è®© `listener` ç›‘å¬ `event_type`, å½“äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨åœ¨æœ€åè¿è¡Œ `listener`. å¦‚æœ `listener` å·²ç»åœ¨ç›‘å¬ `event_type`, åˆ™è°ƒç”¨æœ¬å‡½æ•°ä¼šå°† `listener` è°ƒæ•´ä¸ºæœ€åè¿è¡Œ.

å½“ `eventMakeLast` æ‰€åœ¨çš„å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶, ç›‘å¬å°†ä¼šè‡ªåŠ¨å¸è½½.

```ts
function eventMakeLast<T extends EventType>(
  event_type: T,
  listener: ListenerType[T],
): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦ç›‘å¬çš„äº‹ä»¶

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦æ³¨å†Œ/è°ƒæ•´åˆ°æœ€åè¿è¡Œçš„å‡½æ•°

### ç¤ºä¾‹

```ts
eventMakeLast(è¦ç›‘å¬çš„äº‹ä»¶, è¦æ³¨å†Œçš„å‡½æ•°);
```

## eventMakeFirst <Badge type="warning" text="ğŸš«TavernHelper" />

è®© `listener` ç›‘å¬ `event_type`, å½“äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨åœ¨æœ€å…ˆè¿è¡Œ `listener`; å¦‚æœ `listener` å·²ç»åœ¨ç›‘å¬ `event_type`, åˆ™è°ƒç”¨æœ¬å‡½æ•°ä¼šå°† `listener` è°ƒæ•´ä¸ºæœ€å…ˆè¿è¡Œ.

å½“ `eventMakeFirst` æ‰€åœ¨çš„å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶, ç›‘å¬å°†ä¼šè‡ªåŠ¨å¸è½½.

```ts
function eventMakeFirst<T extends EventType>(
  event_type: T,
  listener: ListenerType[T],
): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦ç›‘å¬çš„äº‹ä»¶

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦æ³¨å†Œ/è°ƒæ•´åˆ°æœ€å…ˆè¿è¡Œçš„å‡½æ•°

### ç¤ºä¾‹

```ts
eventMakeFirst(è¦ç›‘å¬çš„äº‹ä»¶, è¦æ³¨å†Œçš„å‡½æ•°);
```

## eventOnce <Badge type="warning" text="ğŸš«TavernHelper" />

è®© `listener` ä»…ç›‘å¬ä¸‹ä¸€æ¬¡ `event_type`, å½“è¯¥æ¬¡äº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œ `listener`, æ­¤åå–æ¶ˆç›‘å¬; å¦‚æœ `listener` å·²ç»åœ¨ç›‘å¬ `event_type`, åˆ™è°ƒç”¨æœ¬å‡½æ•°ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ.

å½“ `eventOnce` æ‰€åœ¨çš„å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶, ç›‘å¬å°†ä¼šè‡ªåŠ¨å¸è½½.

```ts
function eventOnce<T extends EventType>(
  event_type: T,
  listener: ListenerType[T],
): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦ç›‘å¬çš„äº‹ä»¶

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦æ³¨å†Œçš„å‡½æ•°

### ç¤ºä¾‹

```ts
eventOnce(è¦ç›‘å¬çš„äº‹ä»¶, è¦æ³¨å†Œçš„å‡½æ•°);
```

## eventEmit <Badge type="warning" text="ğŸš«TavernHelper" />

å‘é€ `event_type` äº‹ä»¶, åŒæ—¶å¯ä»¥å‘é€ä¸€äº›æ•°æ® `data`.

æ‰€æœ‰æ­£åœ¨ç›‘å¬ `event_type` æ¶ˆæ¯é¢‘é“çš„éƒ½ä¼šæ”¶åˆ°è¯¥æ¶ˆæ¯å¹¶æ¥æ”¶åˆ° `data`.

```ts
function eventEmit<T extends EventType>(
  event_type: T,
  ...data: Parameters<ListenerType[T]>
): Promise<void>;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦å‘é€çš„äº‹ä»¶

#### `data`

- **ç±»å‹**: `any[]`
- **æè¿°**: è¦éšç€äº‹ä»¶å‘é€çš„æ•°æ®

### ç¤ºä¾‹

:::code-group

```ts [å‘é€"è§’è‰²é˜¶æ®µæ›´æ–°å®Œæˆ"äº‹ä»¶]
// å‘é€ "è§’è‰²é˜¶æ®µæ›´æ–°å®Œæˆ" äº‹ä»¶, æ‰€æœ‰ç›‘å¬è¯¥äº‹ä»¶çš„ `listener` éƒ½ä¼šè¢«è¿è¡Œ
eventEmit("è§’è‰²é˜¶æ®µæ›´æ–°å®Œæˆ");
```

```ts [å‘é€"å­˜æ¡£"äº‹ä»¶]
// å‘é€ "å­˜æ¡£" äº‹ä»¶, å¹¶ç­‰å¾…æ‰€æœ‰ `listener` (ä¹Ÿè®¸æ˜¯è´Ÿè´£å­˜æ¡£çš„å‡½æ•°) æ‰§è¡Œå®Œæ¯•åæ‰ç»§ç»­
await eventEmit("å­˜æ¡£");
```

```ts [å‘é€æ—¶æºå¸¦æ•°æ®]
// å‘é€æ—¶æºå¸¦æ•°æ® ["ä½ å¥½", 0]
eventEmit("äº‹ä»¶", "ä½ å¥½", 0);
```

:::

### /STScript å‘½ä»¤

æˆ‘ä»¬è¿˜æä¾›äº† /STScript å‘½ä»¤ `/event-emit`, å…è®¸ä½ é€šè¿‡åœ¨å¿«é€Ÿå›å¤æŒ‰é’®ä¸­å‘é€äº‹ä»¶æ¥è§¦å‘è„šæœ¬.

:::code-group

```plaintext [å¿«é€Ÿå›å¤éƒ¨åˆ†]
/event-emit event="éšä¾¿ä»€ä¹ˆåå­—" data="è¿™æ˜¯ä¸€ä¸ªæœ‰ç©ºæ ¼çš„ æ•°æ®" data={{user}}
```

```ts [ä»£ç éƒ¨åˆ†]
eventOn("éšä¾¿ä»€ä¹ˆåå­—", (data1, data2) => { console.info(data1, data2); });
```

:::

å½“æˆ‘ä»¬æŒ‰ä¸‹è¯¥å¿«é€Ÿå›å¤çš„æŒ‰é’®å, æ­£åœ¨ç›‘å¬ "éšä¾¿ä»€ä¹ˆåå­—" æ¶ˆæ¯é¢‘é“çš„ä»£ç å°†ä¼šè·å¾— `data` å¹¶å¼€å§‹æ‰§è¡Œ.

:::tip
å½“ç„¶, æ›´å»ºè®®ä½ ç›´æ¥ä½¿ç”¨[é…’é¦†åŠ©æ‰‹è„šæœ¬æŒ‰é’®](/guide/åŸºæœ¬ç”¨æ³•/è„šæœ¬åº“.md)æ¥è§¦å‘è„šæœ¬.
:::

## eventEmitAndWait <Badge type="warning" text="ğŸš«TavernHelper" />

æºå¸¦ `data` è€Œå‘é€ `event_type` äº‹ä»¶å¹¶ç­‰å¾…äº‹ä»¶å¤„ç†ç»“æŸ.

```ts
function eventEmitAndWait<T extends EventType>(
  event_type: T,
  ...data: Parameters<ListenerType[T]>
): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦å‘é€çš„äº‹ä»¶

#### `data`

- **ç±»å‹**: `any[]`
- **æè¿°**: è¦éšç€äº‹ä»¶å‘é€çš„æ•°æ®

## eventRemoveListener <Badge type="warning" text="ğŸš«TavernHelper" />

è®© `listener` å–æ¶ˆå¯¹ `event_type` çš„ç›‘å¬; å¦‚æœ `listener` æ²¡æœ‰ç›‘å¬ `event_type`, åˆ™è°ƒç”¨æœ¬å‡½æ•°ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ.

å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶ä¼šè‡ªåŠ¨å¸è½½æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬, ä½ ä¸å¿…æ‰‹åŠ¨è°ƒç”¨ `eventRemoveListener` æ¥ç§»é™¤.

```ts
function eventRemoveListener<T extends EventType>(
  event_type: T,
  listener: ListenerType[T],
): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦å‘é€çš„äº‹ä»¶

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦å–æ¶ˆæ³¨å†Œçš„å‡½æ•°

### ç¤ºä¾‹

```ts
eventRemoveListener(è¦å–æ¶ˆç›‘å¬çš„äº‹ä»¶, è¦å–æ¶ˆæ³¨å†Œçš„å‡½æ•°);
```

## eventClearEvent <Badge type="warning" text="ğŸš«TavernHelper" />

å–æ¶ˆæœ¬ iframe ä¸­å¯¹ `event_type` çš„æ‰€æœ‰ç›‘å¬.

å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶ä¼šè‡ªåŠ¨å¸è½½æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬, ä½ ä¸å¿…æ‰‹åŠ¨è°ƒç”¨ `eventClearEvent` æ¥ç§»é™¤.

```ts
function eventClearEvent(event_type: EventType): void;
```

### å‚æ•°

#### `event_type`

- **ç±»å‹**: [`EventType`](./ç›‘å¬å’Œå‘é€äº‹ä»¶#äº‹ä»¶åˆ—è¡¨)
- **æè¿°**: è¦å–æ¶ˆç›‘å¬çš„äº‹ä»¶

## eventClearListener <Badge type="warning" text="ğŸš«TavernHelper" />

å–æ¶ˆæœ¬ iframe ä¸­ `listener` çš„æ‰€æœ‰ç›‘å¬.

å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶ä¼šè‡ªåŠ¨å¸è½½æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬, ä½ ä¸å¿…æ‰‹åŠ¨è°ƒç”¨ `eventClearListener` æ¥ç§»é™¤.

```ts
function eventClearListener(listener: Function): void;
```

### å‚æ•°

#### `listener`

- **ç±»å‹**: `Function`
- **æè¿°**: è¦å–æ¶ˆæ³¨å†Œçš„å‡½æ•°

## eventClearAll <Badge type="warning" text="ğŸš«TavernHelper" />

å–æ¶ˆæœ¬ iframe ä¸­å¯¹æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬.

å‰ç«¯ç•Œé¢/è„šæœ¬å…³é—­æ—¶ä¼šè‡ªåŠ¨å¸è½½æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬, ä½ ä¸å¿…æ‰‹åŠ¨è°ƒç”¨ `eventClearAll` æ¥ç§»é™¤.

```ts
function eventClearAll(): void;
```
