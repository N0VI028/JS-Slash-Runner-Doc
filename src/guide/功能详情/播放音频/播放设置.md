---
order: 2
---

# 播放设置

:::tip
- 请务必先阅读[如何正确使用酒馆助手](/guide/基本用法/如何正确使用酒馆助手.md)
- [点击查看对应类型定义文件](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/function/audio.ts)(可发给 AI 或 IDE 使用, 酒馆助手界面中提供了打包下载)
:::

你可以通过函数控制[音频播放器](/guide/基本用法/音频播放器.md)的播放模式、音量等设置.

<CustomTOC />

## getAudioSettings

获取音频设置

:::code-group

```ts [getAudioSettings]
function getAudioSettings(type: 'bgm' | 'ambient'): AudioSettings;
```

```ts [AudioSettings]
type AudioSettings = {
  /** 是否启用 */
  enabled: boolean;
  /**
   * 当前播放模式
   * - repeat_one: 单曲循环
   * - repeat_all: 全部循环
   * - shuffle: 随机播放
   * - play_one_and_stop: 播放一首后停止
   */
  mode: 'repeat_one' | 'repeat_all' | 'shuffle' | 'play_one_and_stop';
  /** 是否静音 */
  muted: boolean;
  /** 当前音量 (0-100) */
  volume: number;
};
```

:::

### 参数

#### `type`

- **类型**: `'bgm' | 'ambient'`
- **描述**: 背景音乐 ('bgm') 或音效 ('ambient')

### 返回值

- **音频设置**: [`AudioSettings`](#getaudiosettings)

## setAudioSettings

修改音频设置, 如果某字段不存在, 则使用原本的设置.

:::code-group

```ts [setAudioSettings]
function setAudioSettings(type: 'bgm' | 'ambient', settings: Partial<AudioSettings>): void;
```

:::

### 参数

#### `type`

- **类型**: `'bgm' | 'ambient'`
- **描述**: 背景音乐 ('bgm') 或音效 ('ambient')

#### `settings`

- **类型**: `Partial<AudioSettings>`
- **描述**: 要修改的音频设置

### 示例

:::code-group

```ts [将背景音乐设置为单曲循环]
setAudioSettings('bgm', { mode: 'repeat_one' });
```

```ts [将音效设置为静音]
setAudioSettings('ambient', { muted: true });
```

```ts [将背景音乐音量设置为 50%]
setAudioSettings('bgm', { volume: 50 });
```

:::
