# 脚本功能

:::tip
请务必先阅读[如何正确使用酒馆助手](/guide/基本用法/如何正确使用酒馆助手.md)
:::

[脚本可以添加按钮，可以设置注释](/guide/基本用法/脚本库)

[点击查看对应类型定义文件（可发给AI或IDE使用，酒馆助手设置中提供了打包下载）](https://github.com/N0VI028/JS-Slash-Runner/blob/main/%40types/iframe/script.d.ts)

<CustomTOC />

## getButtonEvent <Badge type="warning" text="🚫TavernHelper" />

获取按钮对应的事件类型

```typescript
function getButtonEvent(button_name: string): string;
```

### 参数

#### `button_name`

- **类型**: `string`
- **描述**: 按钮名

### 返回值

- **事件类型**: `string`

### 示例

```typescript
const event_type = getButtonEvent('按钮名');
eventOn(event_type, () => {
  console.log('按钮被点击了');
});
```

## getScriptButtons

获取指定脚本的按钮列表

:::code-group

```typescript [getScriptButtons]
function getScriptButtons(script_id: string): ScriptButton[];
```

```typescript [ScriptButton]
type ScriptButton = {
  name: string;    // 按钮名称
  visible: boolean; // 按钮是否可见
}
```

:::

### 参数

#### `script_id`

- **类型**: `string`
- **描述**: 脚本的唯一标识符

### 返回值

- **类型**: `ScriptButton[]`
- **描述**: 脚本当前的所有按钮数组

### 示例

```typescript [获取当前脚本的按钮设置]
const buttons = getScriptButtons(getScriptId());
console.log('当前按钮:', buttons);
```

## replaceScriptButtons

替换指定脚本的所有按钮

```typescript
function replaceScriptButtons(script_id: string, buttons: ScriptButton[]): void;
```

### 参数

#### `script_id`

- **类型**: `string`
- **描述**: 脚本的唯一标识符
- **必需**: 是

#### `buttons`

- **类型**: `ScriptButton[]`
- **描述**: 新的按钮数组，将完全替换现有按钮
- **必需**: 是

### 示例

```typescript [设置脚本按钮为一个"开始游戏"按钮]
replaceScriptButtons(getScriptId(), [
  {name: '开始游戏', visible: true}
]);
```

```typescript [点击"前往地点"按钮后，切换为地点选项按钮]
eventOnButton("前往地点", () => {
  replaceScriptButtons(getScriptId(), [
    {name: '学校', visible: true}, 
    {name: '商店', visible: true},
    {name: '回家', visible: true}
  ]);
});
```

## appendInexistentScriptButtons

为脚本添加不存在的按钮（不会重复添加同名按钮）

```typescript
function appendInexistentScriptButtons(script_id: string, buttons: ScriptButton[]): void;
```

### 参数

#### `script_id`

- **类型**: `string`
- **描述**: 脚本的唯一标识符

#### `buttons`

- **类型**: `ScriptButton[]`
- **描述**: 要添加的按钮数组，只会添加当前不存在的按钮

### 示例

```typescript [新增 "重新开始" 按钮（如果不存在的话）]
appendInexistentScriptButtons(getScriptId(), [{name: '重新开始', visible: true}]);
```

## getScriptInfo

获取脚本作者注释

```typescript
function getScriptInfo(): string;
```

### 返回值

- **类型**: `string`
- **描述**: 脚本作者注释

### 示例

```typescript [获取脚本作者注释]
const info = getScriptInfo();
console.log('脚本作者注释:', info);
```

## replaceScriptInfo

替换脚本作者注释

```typescript
function replaceScriptInfo(info: string): void;
```

### 参数

#### `info`

- **类型**: `string`
- **描述**: 新的作者注释

### 示例

```typescript [替换脚本作者注释]
replaceScriptInfo('新的作者注释');
```
